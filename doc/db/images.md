# Images Collection

Stores the filepath for images and image data unique to each user image.

## Document Structure

#### NOTE: Clientside Database

LokiJs uses a `$loki` field instead of the `_id` field and uses integers
instead of `ObjectId`s

| Field        | Srv/Cli | Type     | Description                                                      |
|--------------|---------|----------|------------------------------------------------------------------|
| _id          | Both    | ObjectId | Unique ID generated by mongodb, primary key for this document    |
| uid          | Both    | ObjectId | Unique ID of the user that owns the image                        |
| hash         | Both    | String   | Generated sha1 hash for this image, provided by client           |
| location     | Both    | String   | Path to the image on the client/server                           |
| metadata     | Both    | Object   | See below for structure                                          |
| remoteId     | Client  | String   | Unique ID of the image serverside                                |
| url          | Client  | String   | Relative URL used when sharing the image                         |
| modified     | Client  | Date     | JS Date object of the modified time                              |
| mimeType     | Server  | String   | MIME Type of the original image file                             |
| shared       | Server  | Boolean  | Whether or not the image is publically visible                   |
| refs         | Server  | Number   | Number of galleries/syncs referencing this image                 |

### Metadata Structure

| Field        | Type     | Description                                                      |
|--------------|----------|------------------------------------------------------------------|
| rating       | Integer  | Rating of the image, on a scale of 0-5                           |
| tags         | Array    | Tags (strings) applied to this image                             |

## Example Document (Clientside)

```js
{
  "_id" : ObjectId("10ad0c7ca2377f3ee4cd9231"),
  "uid" : ObjectId("f067342bb93572ed90f69d50"),
  "remoteId" : ObjectId("0571a46bf77c03a2c9a7cd03"),
  "hash" : "379a10345c7f04de5d55c6d6",
  "size" : 3241578143,
  "modified" : [Date Object],
  "location" : "/home/here.png",
  "url" : "0571a46bf77c03a2c9a7cd03.png",
  "metadata" : {"rating": 3, "tags": ["winter", "chill"]}
}
```

## Example Document (Serverside)

```js
{
  "_id" : ObjectId("10ad0c7ca2377f3ee4cd9231"),
  "uid" : ObjectId("f067342bb93572ed90f69d50"),
  "hash" : "379a10345c7f04de5d55c6d6",
  "refs" : 5,
  "location" : "/home/379a10345c7f04de5d55c6d6.png",
  "shared": false,
  "metadata" : {"rating": 3, "tags": ["winter", "chill"]}
}
```

